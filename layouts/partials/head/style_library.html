{{- $normalize := resources.Get "css/normalize.css" -}}
{{- $syntax := resources.Get "css/syntax.css" -}}

{{- $library := resources.Get "scss/fontawesome.scss" -}}
{{- $library = $library | resources.ToCSS -}}

{{- $styleSlice := slice $syntax $normalize $library -}}

{{- /* Calculate hash */ -}}
{{- $stylesHashSource := $styleSlice | resources.Concat "/tmp/fingerprint_library_css.css" | resources.Minify | resources.Fingerprint "sha512" -}}
{{- $stylesHash := md5 $stylesHashSource.Data.Integrity -}}

{{- /* Concatenate to build */ -}}
{{- $buildName := print $stylesHash "/css/library.css" -}}
{{- $style := $styleSlice | resources.Concat $buildName -}}

{{- /* Production preparation */ -}}
{{- if eq hugo.Environment "production" -}}
  {{- $style = $style | resources.Minify -}}
{{- end -}}

<link rel="stylesheet" href="{{ $style.RelPermalink }}" />
